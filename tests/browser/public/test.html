<!DOCTYPE html>
<html>
<head>
  <title>Puppeteer Mocha</title>
</head>
<body>
    <!-- Canvas placeholder -->
    <div id="screen"></div>
    <script type="module">
      import * as me from './melon/melonjs.module.js';

      me.boot();
      me.video.init(800, 600, {parent : "screen", scale : "auto", renderer : me.video.AUTO});

      // load test assets
      me.loader.load(
      {
          name: "rect",
          type: "image",
          src: "./data/img/rect.png",
      },
      null,
      function () {
          throw new Error("Failed to load `rect.png`");
      });

      // a Text object
      globalThis.font = new me.Text(0, 0, {
          font: "Arial",
          size: 8,
          fillStyle: "white",
          text: "test",
          offScreenCanvas: false
      });

      // a camera instance
      globalThis.camera = new me.Camera2d(0, 0, 1000, 1000);
      // am infinite camera
      globalThis.infiniteCamera = new me.Camera2d(-Infinity, -Infinity, Infinity, Infinity);
      // a vector instance
      globalThis.result = new me.Vector2d();
      // a 10x10 renderable
      globalThis.renderable10x10 = new me.Renderable(0, 0, 10, 10);

      // a test entity object
      globalThis.entity = new me.Entity(100, 100, {
          width: 32,
          height: 64,
          image: "rect",
          shapes: [],
      });

      // a default rect shape
      globalThis.defaultRectShape = new me.Rect(10, 10, 32, 64);
  </script>
</body>
</html>